cache:
  paths:
    - cache/

stages:
  - test

test:
  stage: test
  before_script:
    - echo 'deb http://packages.dotdeb.org jessie all' > /etc/apt/sources.list.d/dotdeb.list
    - apt-get install apt-transport-https
    - apt-get update -qq && apt-get -qq install -y php5 php5-cli php5-xml php5-json php5-gd php5-mysql php5-soap php5-zip
    - curl -sS https://getcomposer.org/installer | php -- --install-dir=/usr/local/bin --filename=composer
    - export COMPOSER_CACHE_DIR=/cache/composer
  script:
    - composer install
    - phpunit -c htdocs/typo3conf/ext/be_secure_pw/Configuration/Build/UnitTests.xml
